<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Safer ¬∑ women safety (fixed share link)</title>
    <!-- OpenStreetMap via Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Font Awesome 5 -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <!-- Google Font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        body {
            background: #4a0033;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 12px;
        }
        .phone-mock {
            max-width: 380px;
            width: 100%;
            background: #fde6f2;
            border-radius: 44px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.6), 0 0 0 8px #8f5e7a;
            overflow: hidden;
            position: relative;
            height: 720px;
            display: flex;
            flex-direction: column;
            border: 2px solid #b94e7c;
        }
        .status-bar {
            background: #ffd9e8;
            padding: 12px 22px 8px;
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            font-weight: 600;
            color: black;
            border-bottom: 1px solid #d9a6b9;
        }
        .app-header {
            background: #d96c9e;
            padding: 6px 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: black;
            font-weight: 700;
        }
        .app-header h2 {
            font-size: 18px;
            font-weight: 700;
            color: black;
        }
        .app-header i {
            font-size: 20px;
            background: rgba(255,255,255,0.3);
            padding: 6px;
            border-radius: 30px;
            color: black;
        }
        .screen-content {
            flex: 1;
            overflow-y: auto;
            padding: 18px 16px 80px;
            scrollbar-width: thin;
            background: #fde6f2;
        }
        /* login screen */
        #loginScreen {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: #fde6f2;
            padding: 24px;
        }
        .logo-area {
            text-align: center;
            margin-bottom: 40px;
        }
        .logo-icon {
            background: #d64d7a;
            width: 80px;
            height: 80px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 44px;
        }
        .login-input {
            width: 100%;
            padding: 18px 20px;
            font-size: 18px;
            border: 2px solid #b94e7c;
            border-radius: 40px;
            margin-bottom: 16px;
            text-align: center;
            font-weight: 600;
            outline: none;
            background: #fff0f5;
            color: black;
        }
        .login-btn {
            background: #d64d7a;
            color: white;
            border: none;
            padding: 18px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 50px;
            width: 100%;
            cursor: pointer;
            box-shadow: 0 6px 0 #912d54;
            transition: 0.1s;
        }
        .login-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #912d54;
        }
        #mainApp {
            display: none;
            height: 100%;
            flex-direction: column;
        }
        .map-container {
            height: 180px;
            width: 100%;
            border-radius: 28px;
            margin-bottom: 16px;
            border: 2px solid #e6a0c0;
            box-shadow: 0 6px 14px rgba(0,0,0,0.1);
            z-index: 1;
        }
        /* RED SOS CARD */
        .sos-card {
            background: #d43f61;
            border-radius: 28px;
            padding: 18px 16px;
            margin-bottom: 22px;
            color: white;
            box-shadow: 0 12px 24px -8px #a1314b;
            width: 100%;
            overflow: hidden;
        }
        .sos-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        .sos-left h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            color: white;
        }
        .sos-left p {
            font-size: 14px;
            opacity: 0.95;
            display: flex;
            align-items: center;
            gap: 6px;
            color: white;
        }
        .double-tap-sos-btn {
            background: white;
            color: #d43f61;
            min-width: 70px;
            width: 70px;
            height: 70px;
            border-radius: 40px;
            font-size: 28px;
            font-weight: bold;
            box-shadow: 0 8px 0 0 #9e2d48, 0 12px 24px rgba(0,0,0,0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.05s;
            flex-shrink: 0;
        }
        /* TRUSTED CONTACT SECTION - FIXED INPUT STRUCTURE */
        .trusted-contacts-section {
            background: rgba(255,255,255,0.15);
            border-radius: 24px;
            padding: 16px 14px;
            margin: 12px 0;
            width: 100%;
            border: 1px solid rgba(255,255,255,0.3);
        }
        .trusted-contacts-section p {
            color: white;
            margin-bottom: 12px;
            font-size: 15px;
        }
        .trusted-input-row {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
            width: 100%;
        }
        .trusted-input-row input {
            flex: 1 1 0;
            min-width: 100px;
            padding: 12px 14px;
            border-radius: 40px;
            border: none;
            font-size: 14px;
            background: white;
            color: black;
            outline: none;
        }
        .trusted-input-row button {
            background: #b94e7c;
            color: white;
            border: none;
            border-radius: 40px;
            padding: 12px 20px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .emergency-officials {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 12px;
            width: 100%;
        }
        .official-btn {
            background: white;
            color: #b13e5c;
            padding: 12px 6px;
            border-radius: 40px;
            font-size: 13px;
            font-weight: 700;
            text-align: center;
            border: 1px solid #b13e5c;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .beige-card {
            background: #f8eedb;
            border-radius: 28px;
            padding: 18px 16px;
            margin-bottom: 18px;
            border: 1px solid #e6cca6;
            color: black;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            width: 100%;
            overflow: hidden;
        }
        .beige-title {
            font-weight: 700;
            margin-bottom: 12px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        /* FIXED SHARE LINK - NOW CLICKABLE */
        .share-link-btn {
            color: #b13e5c;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 6px 10px;
            border-radius: 40px;
            background: rgba(255,255,255,0.5);
            transition: background 0.2s;
            font-weight: 600;
        }
        .share-link-btn:hover {
            background: rgba(255,255,255,0.8);
        }
        .share-link-btn i {
            font-size: 14px;
        }
        .live-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
            flex-wrap: wrap;
            gap: 8px;
        }
        #liveCoord {
            font-size: 13px;
            word-break: break-word;
        }
        .comments-section {
            background: #f4e5d7;
            border-radius: 20px;
            padding: 12px;
            margin-top: 12px;
        }
        .comment-item {
            background: white;
            border-radius: 30px;
            padding: 8px 14px;
            margin: 8px 0;
            font-size: 13px;
            word-break: break-word;
        }
        .add-comment {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        .add-comment input {
            flex: 1;
            min-width: 150px;
            background: white;
            border: 1px solid #b94e7c;
            border-radius: 40px;
            padding: 10px 16px;
            outline: none;
        }
        .add-comment button {
            background: #d64d7a;
            color: white;
            border: none;
            border-radius: 40px;
            padding: 10px 20px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
        }
        .fake-call-row {
            background: #f8eedb;
            border-radius: 22px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        .fake-avatar {
            background: #b94e7c;
            width: 52px;
            height: 52px;
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
            flex-shrink: 0;
        }
        .call-screen-sim {
            background: #e6cca6;
            border-radius: 40px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
        }
        .stay-category {
            background: #f8eedb;
            border-radius: 24px;
            padding: 14px;
            margin: 12px 0;
            border: 1px solid #e6cca6;
        }
        .trusted-user-row {
            display: flex;
            justify-content: space-between;
            background: #f8eedb;
            padding: 12px 18px;
            border-radius: 40px;
            margin: 8px 0;
            border: 1px solid #e6cca6;
            flex-wrap: wrap;
            gap: 8px;
        }
        .bottom-nav {
            background: #ffd9e8;
            backdrop-filter: blur(12px);
            padding: 12px 28px;
            display: flex;
            justify-content: space-between;
            border-top: 1px solid #d9a6b9;
            font-size: 22px;
            color: black;
            flex-shrink: 0;
        }
        .toast-msg {
            background: #333;
            color: white;
            padding: 12px 18px;
            border-radius: 60px;
            font-size: 14px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 8px 20px black;
            word-break: break-word;
        }
        .weather-indicator {
            margin-top:8px; 
            background:#e6cca6; 
            border-radius:40px; 
            padding:8px 12px; 
            display:flex; 
            justify-content:space-between;
        }
    </style>
</head>
<body>
<div class="phone-mock">
    <div class="status-bar"><span>9:41</span><span><i class="fas fa-signal"></i> <i class="fas fa-wifi"></i> <i class="fas fa-battery-full"></i></span></div>

    <!-- LOGIN SCREEN -->
    <div id="loginScreen">
        <div class="logo-area">
            <div class="logo-icon"><i class="fas fa-shield-alt"></i></div>
            <h2 style="font-size:28px; color:black;">Safer</h2>
            <p style="color:#5a3a48;">login with user ID & password</p>
        </div>
        <input type="text" class="login-input" id="userId" placeholder="user ID (e.g. @safe)" value="@safe_woman">
        <input type="password" class="login-input" id="password" placeholder="password" value="123456">
        <button class="login-btn" id="loginBtn"><i class="fas fa-arrow-right"></i> login</button>
        <p class="hint">use any ID/password for demo</p>
    </div>

    <!-- MAIN APP -->
    <div id="mainApp">
        <div class="app-header">
            <i class="fas fa-bars"></i>
            <h2>Safer ¬∑ pink mode</h2>
            <i class="fas fa-user-circle" id="logoutIcon" style="cursor:pointer;"></i>
        </div>
        <div class="screen-content" id="screenContent">
            <div id="liveAlertPlaceholder"></div>

            <!-- ========== 1. DOUBLE TAP SOS ========= -->
            <div class="sos-card">
                <div class="sos-row">
                    <div class="sos-left">
                        <h3>üÜò DOUBLE TAP SOS</h3>
                        <p><i class="fas fa-hand-pointer"></i> double tap red button</p>
                    </div>
                    <div class="double-tap-sos-btn" id="doubleTapSos">SOS</div>
                </div>
                
                <!-- TRUSTED CONTACT - FIXED STRUCTURE FROM YOUR HTML -->
                <div class="trusted-contacts-section">
                    <p><i class="fas fa-user-check"></i> Trusted contact (set below)</p>
                    <div class="trusted-input-row">
                        <input type="text" id="trustedContactName" placeholder="Name" value="Rahul">
                        <input type="tel" id="trustedContactPhone" placeholder="Phone" value="9876543210">
                        <button id="setTrustedBtn">Set</button>
                    </div>
                </div>
                <p style="font-size:13px; margin-top:10px; color:white;"><i class="fas fa-sms"></i> double tap: SMS + call to trusted</p>

                <!-- emergency officials -->
                <div class="emergency-officials">
                    <div class="official-btn" data-official="100">üëÆ 100 (police)</div>
                    <div class="official-btn" data-official="1091">üë© 1091 (pink)</div>
                    <div class="official-btn" data-official="108">üöë 108 (ambulance)</div>
                    <div class="official-btn" data-official="112">üìû 112 (integrated)</div>
                </div>
            </div>

            <!-- 2. LIVE LOCATION TRACKING with CLICKABLE SHARE LINK -->
            <div class="beige-card" id="liveTrackCard">
                <div class="beige-title"><i class="fas fa-map-marked-alt"></i> 2. Live location tracking</div>
                <div id="liveMap" class="map-container"></div>
                <div class="live-row">
                    <span id="liveCoord">Fetching location...</span>
                    <!-- FIXED: Now a proper clickable share button -->
                    <span class="share-link-btn" id="shareLinkBtn">
                        <i class="fas fa-share-alt"></i> share link
                    </span>
                </div>
                <p style="font-size:12px;">tracking 10-15 min ¬∑ link sharable</p>
                <div class="weather-indicator">
                    <span>26¬∞C</span>
                    <span>Partly cloudy <i class="fas fa-cloud-sun"></i></span>
                </div>
            </div>

            <!-- 3. SHAKE TO ALERT -->
            <div class="beige-card" id="shakeCard">
                <div class="beige-title"><i class="fas fa-mobile-alt"></i> 3. Shake to alert</div>
                <p>Shake phone (simulate) ‚Üí triggers SOS</p>
                <button id="simulateShake" style="background:#d96c9e; color:white; border:none; border-radius:40px; padding:10px 20px; cursor:pointer;">Simulate shake</button>
            </div>

            <!-- 4. DANGER ZONE MAP -->
            <div class="beige-card" id="dangerZoneCard">
                <div class="beige-title"><i class="fas fa-map"></i> 4. Danger zone map</div>
                <div id="dangerMap" class="map-container"></div>
                <div style="display:flex; gap:12px; margin:10px 0; flex-wrap:wrap;">
                    <span style="background:#d43f61; color:white; padding:6px 12px; border-radius:30px;">safety score: 42</span>
                    <span>üî¥ red zone nearby</span>
                </div>
                <div style="font-size:13px; margin:5px 0;">üìç Barkatpur ¬∑ Amberpet ¬∑ Chandigarh</div>
                <div class="comments-section">
                    <p><strong><i class="fas fa-comments"></i> user experiences</strong></p>
                    <div id="commentsList">
                        <div class="comment-item">@riya: felt unsafe near metro</div>
                        <div class="comment-item">@neha: dark street, avoid</div>
                    </div>
                    <div class="add-comment">
                        <input type="text" id="newComment" placeholder="add your experience...">
                        <button id="postCommentBtn">Post</button>
                    </div>
                </div>
                <p style="font-size:12px; margin-top:8px;"><i class="fas fa-sms"></i> alert via SMS when entering zone</p>
            </div>

            <!-- 5. FAKE CALL -->
            <div class="beige-card" id="fakeCallCard">
                <div class="beige-title"><i class="fas fa-phone-alt"></i> 5. Fake call</div>
                <div class="fake-call-row">
                    <div class="fake-avatar"><i class="fas fa-user-tie"></i></div>
                    <div style="flex:1;">
                        <p style="margin-bottom:6px;">caller: <span id="fakeCallerName">Dad</span></p>
                        <div style="display:flex; gap:6px; flex-wrap:wrap;">
                            <input type="text" id="setFakeNameInput" placeholder="set caller name" style="flex:1; min-width:120px; padding:8px; border-radius:30px; border:1px solid gray;">
                            <button id="setFakeNameBtn" style="background:#d64d7a; color:white; border:none; border-radius:30px; padding:8px 16px;">set</button>
                        </div>
                    </div>
                </div>
                <div class="call-screen-sim" id="fakeCallTrigger">
                    <i class="fas fa-phone fa-3x" style="color:#2e7d32;"></i>
                    <p style="font-weight:700;">tap to show fake call screen</p>
                </div>
            </div>

            <!-- 6. SAFE STAY -->
            <div class="beige-card" id="safeStayCard">
                <div class="beige-title"><i class="fas fa-bed"></i> 6. Safe stay</div>
                <div class="stay-category">
                    <p><strong>üè® trusted residence</strong> ¬∑ Tulsi stay (24/7) ‚≠ê4.8</p>
                    <p><i class="fas fa-clock"></i> open ¬∑ rooms: 3</p>
                </div>
                <div class="stay-category">
                    <p><strong>üç± food & necessities</strong> ¬∑ Anjali cafe (open till 11pm) ¬∑ grocery 24h</p>
                </div>
                <div class="stay-category">
                    <p><strong>üöñ safe transport</strong> ¬∑ Priya cabs ‚≠ê4.9 ¬∑ women drivers</p>
                </div>
                <p style="font-size:12px;">based on user reviews</p>
            </div>

            <!-- 7. NEARBY TRUSTED USERS -->
            <div class="beige-card" id="trustedUserCard">
                <div class="beige-title"><i class="fas fa-users"></i> 7. Nearby trusted users</div>
                <div class="trusted-user-row">
                    <span><i class="fas fa-user-circle"></i> @anita_raj (200m)</span>
                    <span><i class="fas fa-comment" style="color:#b13e5c; cursor:pointer;"></i> <i class="fas fa-phone" style="color:#27ae60; cursor:pointer; margin-left:8px;"></i></span>
                </div>
                <div class="trusted-user-row">
                    <span><i class="fas fa-user-circle"></i> @meera_s (450m)</span>
                    <span><i class="fas fa-comment" style="color:#b13e5c; cursor:pointer;"></i> <i class="fas fa-phone" style="color:#27ae60; cursor:pointer; margin-left:8px;"></i></span>
                </div>
                <div class="trusted-user-row">
                    <span><i class="fas fa-user-circle"></i> @priya_w (800m)</span>
                    <span><i class="fas fa-comment" style="color:#b13e5c; cursor:pointer;"></i> <i class="fas fa-phone" style="color:#27ae60; cursor:pointer; margin-left:8px;"></i></span>
                </div>
            </div>
        </div>

        <!-- bottom nav -->
        <div class="bottom-nav">
            <i class="fas fa-home nav-item active"></i>
            <i class="fas fa-map-marked-alt nav-item"></i>
            <i class="fas fa-bell nav-item"></i>
            <i class="fas fa-user nav-item"></i>
        </div>
    </div>
</div>

<script>
    (function() {
        // LOGIN
        const loginScreen = document.getElementById('loginScreen');
        const mainApp = document.getElementById('mainApp');
        const loginBtn = document.getElementById('loginBtn');
        const logoutIcon = document.getElementById('logoutIcon');

        loginBtn.addEventListener('click', function() {
            loginScreen.style.display = 'none';
            mainApp.style.display = 'flex';
            showToast('‚úÖ Logged in ¬∑ pink mode');
            initLiveMap();
            initDangerMap();
        });

        logoutIcon.addEventListener('click', function() {
            mainApp.style.display = 'none';
            loginScreen.style.display = 'flex';
            if (watchId) navigator.geolocation.clearWatch(watchId);
        });

        // TOAST FUNCTION
        function showToast(msg, bg = '#2d3c5e') {
            const placeholder = document.getElementById('liveAlertPlaceholder');
            const toast = document.createElement('div');
            toast.className = 'toast-msg';
            toast.style.background = bg;
            toast.innerHTML = `<i class="fas fa-info-circle"></i> <span>${msg}</span> <i class="fas fa-times" style="margin-left:auto;" onclick="this.parentElement.remove()"></i>`;
            placeholder.appendChild(toast);
            setTimeout(() => { if(toast.parentNode) toast.remove(); }, 4000);
        }

        // DOUBLE TAP SOS
        const sosBtn = document.getElementById('doubleTapSos');
        let lastTap = 0;
        sosBtn.addEventListener('click', function() {
            let now = new Date().getTime();
            if (now - lastTap < 400) {
                const name = document.getElementById('trustedContactName').value || 'Rahul';
                const phone = document.getElementById('trustedContactPhone').value || '9876543210';
                showToast(`üÜò SOS ¬∑ SMS & call to ${name} (${phone})`, '#b91c1c');
                if (navigator.vibrate) navigator.vibrate(500);
            } else {
                lastTap = now;
                showToast('üëÜ Tap again to confirm SOS', '#b94e7c');
            }
        });

        document.getElementById('setTrustedBtn').addEventListener('click', function() {
            showToast(`‚úÖ Trusted contact updated`);
        });

        document.querySelectorAll('.official-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                let num = this.dataset.official;
                showToast(`üìû Calling emergency ${num}`, '#27ae60');
            });
        });

        // SHAKE
        document.getElementById('simulateShake').addEventListener('click', function() {
            showToast(`üì≥ Shake alert! SOS triggered`, '#b91c1c');
        });

        // FIXED: SHARE LINK BUTTON - NOW FUNCTIONAL
        document.getElementById('shareLinkBtn').addEventListener('click', function() {
            // Get current coordinates
            const lat = currentLat.toFixed(4);
            const lng = currentLng.toFixed(4);
            const shareUrl = `https://maps.safer.com/track?lat=${lat}&lng=${lng}&user=${encodeURIComponent(document.getElementById('userId').value || '@safe_woman')}`;
            
            // Simulate copy to clipboard
            navigator.clipboard?.writeText(shareUrl).catch(() => {});
            
            showToast(`üìç Live location link copied: ${shareUrl}`, '#b13e5c');
        });

        // FAKE CALL
        document.getElementById('setFakeNameBtn').addEventListener('click', function() {
            let newName = document.getElementById('setFakeNameInput').value.trim();
            if (newName) document.getElementById('fakeCallerName').innerText = newName;
        });
        document.getElementById('fakeCallTrigger').addEventListener('click', function() {
            let name = document.getElementById('fakeCallerName').innerText;
            alert(`üì≤ FAKE CALL ¬∑ Incoming from ${name}`);
        });

        // COMMENT
        document.getElementById('postCommentBtn').addEventListener('click', function() {
            let comment = document.getElementById('newComment').value.trim();
            if (!comment) return;
            let list = document.getElementById('commentsList');
            let newDiv = document.createElement('div');
            newDiv.className = 'comment-item';
            newDiv.innerText = '@you: ' + comment;
            list.appendChild(newDiv);
            document.getElementById('newComment').value = '';
            showToast('üí¨ Comment added');
        });

        // TRUSTED USER MESSAGE/CALL
        document.getElementById('trustedUserCard').addEventListener('click', function(e) {
            if (e.target.classList.contains('fa-comment')) {
                showToast('üí¨ DM sent to trusted user');
            } else if (e.target.classList.contains('fa-phone')) {
                showToast('üìû Calling trusted user');
            }
        });

        // MAPS
        let watchId = null;
        let currentLat = 17.3850, currentLng = 78.4867;
        let liveMap, liveMarker, dangerMap, dangerMarker;

        if (navigator.geolocation) {
            watchId = navigator.geolocation.watchPosition(
                (pos) => {
                    currentLat = pos.coords.latitude;
                    currentLng = pos.coords.longitude;
                    document.getElementById('liveCoord').innerHTML = `<i class="fas fa-circle"></i> Lat: ${currentLat.toFixed(4)}, Lng: ${currentLng.toFixed(4)}`;
                    if (liveMarker) liveMarker.setLatLng([currentLat, currentLng]);
                    if (dangerMarker) dangerMarker.setLatLng([currentLat, currentLng]);
                },
                (err) => { 
                    document.getElementById('liveCoord').innerHTML = 'üìç Using default location (Hyderabad)';
                    currentLat = 17.3850; currentLng = 78.4867;
                    if (liveMarker) liveMarker.setLatLng([currentLat, currentLng]);
                    if (dangerMarker) dangerMarker.setLatLng([currentLat, currentLng]);
                },
                { enableHighAccuracy: true }
            );
        } else {
            document.getElementById('liveCoord').innerHTML = 'üìç Geolocation not supported';
        }

        function initLiveMap() {
            if (!liveMap) {
                liveMap = L.map('liveMap').setView([currentLat, currentLng], 16);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '¬© OSM' }).addTo(liveMap);
                liveMarker = L.marker([currentLat, currentLng]).addTo(liveMap).bindPopup('You').openPopup();
            }
        }
        function initDangerMap() {
            if (!dangerMap) {
                dangerMap = L.map('dangerMap').setView([currentLat, currentLng], 15);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '¬© OSM' }).addTo(dangerMap);
                L.circle([currentLat + 0.005, currentLng - 0.005], { radius: 200, color: '#b91c1c', fillColor: '#f00', fillOpacity: 0.4 }).addTo(dangerMap).bindPopup('üî¥ red zone');
                L.circle([currentLat - 0.003, currentLng + 0.004], { radius: 150, color: '#b45309', fillOpacity: 0.3 }).addTo(dangerMap).bindPopup('üü° moderate');
                dangerMarker = L.marker([currentLat, currentLng]).addTo(dangerMap).bindPopup('You').openPopup();
            }
        }
    })();
</script>
</body>
</html>
